@*@model IEnumerable<OnlineTrainTicketBookingMVC.Models.TrainDetailsViewModel>*@

@{
    ViewBag.Title = "SearchTrain";
}

<h2>SearchTrain</h2>

@*@using (Html.BeginForm("SearchTrain", "FindTrain", FormMethod.Post))
    {

    }*@
<table class="box" border="1">
    <tr><td><h2>Train Details</h2></td></tr>
    <tr>
        <td>@Html.TextBox("txtSearch", null, new { @placeholder = "Enter Train Name..." })</td>
        <td><button class="btn1">Search</button></td>
    </tr>

    <tr>
        <th>Train No</th>
        <th>Train Name</th>
        <th>Source Station</th>
        <th>Destination Station</th>
        <th>Departure Time</th>
        <th>Arrival Time</th>
        <th>Train KM</th>
        @*<th>PerKMCost</th>*@
    </tr>
    @foreach (var data in ViewBag.result)
    {
        <tr>
            @*@data.TrainId)
            @data.PerKMCost*@

            <td>
                @data.TrainNo
            </td>
            <td>
                @data.TrainName
            </td>
            <td>
                @data.SourceStation
            </td>
            <td>
                @data.DestinationStation
            </td>
            <td>
                @data.DepartureTime
            </td>
            <td>
                @data.ArrivalTime
            </td>
            <td>
                @data.TrainKM
            </td>
            @*<td>
                @data.PerKMCost
            </td>*@
        </tr>
    }
</table>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
    $("button").click(function search() {
        $("#txtSearch").keypress();
        var txtEnter = $('#txtSearch').val();
        $("table tr").each(function (results) {
            if (results != 0) {
                var id = $(this).find("td:nth-child(2)").text();
                if (id.indexOf(txtEnter) != 0 && id.toLowerCase().indexOf(txtEnter.toLowerCase()) < 0) {
                    $(this).hide();
                }
                else {
                    $(this).show();
                }
            }
        });
    });
</script>

